document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".nav-item"),t=localStorage.getItem("activeNavItem");e.forEach((n=>{const a=n.querySelector(".nav-button"),o=n.querySelector(".submenu");a&&o&&(t&&n.dataset.id===t&&n.classList.add("active"),a.addEventListener("click",(function(){const t=n.classList.toggle("active");e.forEach((e=>{e!==n&&e.classList.remove("active")})),t?localStorage.setItem("activeNavItem",n.dataset.id):localStorage.removeItem("activeNavItem")})))})),document.addEventListener("click",(function(t){t.target.closest(".nav-container")||(e.forEach((e=>e.classList.remove("active"))),localStorage.removeItem("activeNavItem"))}))}));const header=document.querySelector(".header"),toggleMenu=document.getElementById("toggle-menu");document.documentElement.classList.contains("menu-open")&&header.classList.add("open"),document.addEventListener("DOMContentLoaded",(function(){toggleMenu.addEventListener("click",(function(){header.classList.toggle("open");const e=header.classList.contains("open");localStorage.setItem("menuOpen",e),document.documentElement.classList.toggle("menu-open",e)}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("status-form");e.addEventListener("submit",(function(t){t.preventDefault(),Swal.fire({title:"¡Éxito!",text:"El estado de la propiedad ha sido actualizado correctamente.",icon:"success",confirmButtonText:"Aceptar"}).then((t=>{t.isConfirmed&&e.submit()}))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("search"),t=document.getElementById("search-results");let n;function a(e){if(e.length<2)return t.innerHTML="",void t.classList.remove("active");fetch(`/inmobiliaria/search/search.php?q=${encodeURIComponent(e)}`).then((e=>{if(!e.ok)throw new Error("Error en la respuesta del servidor");return e.json()})).then((e=>{if(e.error)throw new Error(e.message||"Error en la búsqueda");let n="";0===e.length?n='<div class="search-result-item">No se encontraron resultados</div>':e.forEach((e=>{let t="",a="";switch(e.tipo){case"propiedad":t=`🏠 ${e.titulo}`,a=`/inmobiliaria/propiedades/single_propiedad.php?id=${e.id}`;break;case"cliente":t=`👤 ${e.nombre} ${e.apellido}`,a=`/inmobiliaria/clientes/editar_cliente.php?id=${e.id}`;break;case"contrato":t=`📄 Contrato #${e.numero_contrato}`,a=`/inmobiliaria/contratos/ver_contrato.php?id=${e.id}`}n+=`\n                            <a href="${a}" class="search-result-item">\n                                <div class="result-title">${t}</div>\n                                <div class="result-type">${e.tipo.charAt(0).toUpperCase()+e.tipo.slice(1)}</div>\n                            </a>\n                        `})),t.innerHTML=n,t.classList.add("active")})).catch((e=>{console.error("Error:",e),t.innerHTML=`<div class="search-result-item">Error: ${e.message}</div>`,t.classList.add("active")}))}e.addEventListener("input",(function(e){clearTimeout(n);const t=e.target.value;n=setTimeout((()=>{a(t)}),300)})),searchForm.addEventListener("submit",(function(t){t.preventDefault(),clearTimeout(n),a(e.value)})),document.addEventListener("click",(function(n){e.contains(n.target)||t.contains(n.target)||searchButton.contains(n.target)||t.classList.remove("active")}))}));//# sourceMappingURL=bundle.js.map
