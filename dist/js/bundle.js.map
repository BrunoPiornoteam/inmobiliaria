{"version":3,"sources":["index.js","propiedades.js","search.js"],"names":["document","addEventListener","navItems","querySelectorAll","activeNavItem","localStorage","getItem","forEach","item","button","querySelector","submenu","dataset","id","classList","add","isActive","toggle","otherItem","remove","setItem","removeItem","event","target","closest","header","toggleMenu","getElementById","documentElement","contains","isOpen","form","preventDefault","Swal","fire","title","text","icon","confirmButtonText","then","result","isConfirmed","submit","searchInput","searchResults","searchTimeout","performSearch","termino","length","innerHTML","fetch","encodeURIComponent","response","ok","Error","json","data","error","message","html","titulo","link","tipo","nombre","apellido","numero_contrato","charAt","toUpperCase","slice","catch","console","e","clearTimeout","value","setTimeout","searchForm","searchButton"],"mappings":"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","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n    const navItems = document.querySelectorAll(\".nav-item\");\r\n\r\n    // Recupera el √≠tem activo del almacenamiento\r\n    const activeNavItem = localStorage.getItem(\"activeNavItem\");\r\n\r\n    navItems.forEach((item) => {\r\n        const button = item.querySelector(\".nav-button\");\r\n        const submenu = item.querySelector(\".submenu\");\r\n\r\n        if (button && submenu) {\r\n            // Si este √≠tem estaba activo antes, lo reactiva\r\n            if (activeNavItem && item.dataset.id === activeNavItem) {\r\n                item.classList.add(\"active\");\r\n            }\r\n\r\n            button.addEventListener(\"click\", function () {\r\n                const isActive = item.classList.toggle(\"active\");\r\n\r\n                // Cierra los otros submen√∫s\r\n                navItems.forEach((otherItem) => {\r\n                    if (otherItem !== item) {\r\n                        otherItem.classList.remove(\"active\");\r\n                    }\r\n                });\r\n\r\n                // Guarda el estado del √≠tem activo en localStorage\r\n                if (isActive) {\r\n                    localStorage.setItem(\"activeNavItem\", item.dataset.id);\r\n                } else {\r\n                    localStorage.removeItem(\"activeNavItem\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Cerrar submen√∫s al hacer clic fuera\r\n    document.addEventListener(\"click\", function (event) {\r\n        if (!event.target.closest(\".nav-container\")) {\r\n            navItems.forEach((item) => item.classList.remove(\"active\"));\r\n            localStorage.removeItem(\"activeNavItem\"); // Limpiar almacenamiento al cerrar todo\r\n        }\r\n    });\r\n});\r\n\r\nconst header = document.querySelector(\".header\");\r\nconst toggleMenu = document.getElementById(\"toggle-menu\");\r\n\r\n// Si ya est√° abierta (agregado antes de cargar), la dejamos as√≠\r\nif (document.documentElement.classList.contains(\"menu-open\")) {\r\n    header.classList.add(\"open\");\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    toggleMenu.addEventListener(\"click\", function () {\r\n        header.classList.toggle(\"open\");\r\n\r\n        const isOpen = header.classList.contains(\"open\");\r\n        localStorage.setItem(\"menuOpen\", isOpen);\r\n        document.documentElement.classList.toggle(\"menu-open\", isOpen);\r\n    });\r\n});","document.addEventListener(\"DOMContentLoaded\", function() {\r\n    const form = document.getElementById(\"status-form\");\r\n\r\n    form.addEventListener(\"submit\", function(event) {\r\n        event.preventDefault(); \r\n\r\n        Swal.fire({\r\n            title: '¬°√âxito!',\r\n            text: 'El estado de la propiedad ha sido actualizado correctamente.',\r\n            icon: 'success',\r\n            confirmButtonText: 'Aceptar'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                form.submit(); \r\n            }\r\n        });\r\n    });\r\n});","document.addEventListener('DOMContentLoaded', function() {\r\n    const searchInput = document.getElementById('search');\r\n    const searchResults = document.getElementById('search-results');\r\n    let searchTimeout;\r\n\r\n    function performSearch(termino) {\r\n        if (termino.length < 2) {\r\n            searchResults.innerHTML = '';\r\n            searchResults.classList.remove('active');\r\n            return;\r\n        }\r\n\r\n        fetch(`/inmobiliaria/search/search.php?q=${encodeURIComponent(termino)}`)\r\n            .then(response => {\r\n                if (!response.ok) {\r\n                    throw new Error('Error en la respuesta del servidor');\r\n                }\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                if (data.error) {\r\n                    throw new Error(data.message || 'Error en la b√∫squeda');\r\n                }\r\n\r\n                let html = '';\r\n                if (data.length === 0) {\r\n                    html = '<div class=\"search-result-item\">No se encontraron resultados</div>';\r\n                } else {\r\n                    data.forEach(item => {\r\n                        let titulo = '';\r\n                        let link = '';\r\n                        \r\n                        switch(item.tipo) {\r\n                            case 'propiedad':\r\n                                titulo = `üè† ${item.titulo}`;\r\n                                link = `/inmobiliaria/propiedades/single_propiedad.php?id=${item.id}`;\r\n                                break;\r\n                            case 'cliente':\r\n                                titulo = `üë§ ${item.nombre} ${item.apellido}`;\r\n                                link = `/inmobiliaria/clientes/editar_cliente.php?id=${item.id}`;\r\n                                break;\r\n                            case 'contrato':\r\n                                titulo = `üìÑ Contrato #${item.numero_contrato}`;\r\n                                link = `/inmobiliaria/contratos/ver_contrato.php?id=${item.id}`;\r\n                                break;\r\n                        }\r\n\r\n                        html += `\r\n                            <a href=\"${link}\" class=\"search-result-item\">\r\n                                <div class=\"result-title\">${titulo}</div>\r\n                                <div class=\"result-type\">${item.tipo.charAt(0).toUpperCase() + item.tipo.slice(1)}</div>\r\n                            </a>\r\n                        `;\r\n                    });\r\n                }\r\n                searchResults.innerHTML = html;\r\n                searchResults.classList.add('active');\r\n            })\r\n            .catch(error => {\r\n                console.error('Error:', error);\r\n                searchResults.innerHTML = `<div class=\"search-result-item\">Error: ${error.message}</div>`;\r\n                searchResults.classList.add('active');\r\n            });\r\n    }\r\n\r\n    // Manejar la b√∫squeda en tiempo real mientras se escribe\r\n    searchInput.addEventListener('input', function(e) {\r\n        clearTimeout(searchTimeout);\r\n        const termino = e.target.value;\r\n        searchTimeout = setTimeout(() => {\r\n            performSearch(termino);\r\n        }, 300);\r\n    });\r\n\r\n    // Manejar el env√≠o del formulario (cuando se hace clic en el bot√≥n o se presiona Enter)\r\n    searchForm.addEventListener('submit', function(e) {\r\n        e.preventDefault();\r\n        clearTimeout(searchTimeout);\r\n        performSearch(searchInput.value);\r\n    });\r\n\r\n    // Cerrar resultados al hacer clic fuera\r\n    document.addEventListener('click', function(e) {\r\n        if (!searchInput.contains(e.target) && !searchResults.contains(e.target) && !searchButton.contains(e.target)) {\r\n            searchResults.classList.remove('active');\r\n        }\r\n    });\r\n});\r\n"]}